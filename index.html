<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maxi JDC - Supermarché en Ligne</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --shadow: 0 5px 15px rgba(0,0,0,0.1);
            --radius: 10px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* HEADER */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
        }
        
        .logo-text h1 {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .logo-text p {
            opacity: 0.9;
            font-size: 0.9rem;
        }
        
        .header-actions {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            padding: 10px;
        }
        
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: white;
            color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        /* NAVIGATION */
        .main-nav {
            display: flex;
            gap: 20px;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: var(--radius);
        }
        
        .nav-btn {
            background: transparent;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: rgba(255,255,255,0.2);
        }
        
        /* MAIN CONTENT */
        .main-content {
            display: flex;
            gap: 30px;
            margin: 30px 0;
            min-height: 600px;
        }
        
        /* SIDEBAR FILTERS */
        .sidebar {
            width: 280px;
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            height: fit-content;
        }
        
        .sidebar-section {
            margin-bottom: 30px;
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category-list {
            list-style: none;
        }
        
        .category-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category-item:hover, .category-item.active {
            background: var(--light);
            color: var(--secondary);
        }
        
        .category-item i {
            width: 20px;
            text-align: center;
        }
        
        .price-filter input {
            width: 100%;
            margin: 15px 0;
        }
        
        .price-range {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* PRODUCTS GRID */
        .products-section {
            flex: 1;
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: var(--primary);
        }
        
        .search-box {
            position: relative;
            width: 300px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 20px;
            padding-left: 45px;
            border: 2px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .product-card {
            background: white;
            border: 2px solid #f0f0f0;
            border-radius: var(--radius);
            padding: 20px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }
        
        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .product-image {
            height: 150px;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--gray);
        }
        
        .product-code {
            font-size: 0.85rem;
            color: var(--gray);
            font-family: monospace;
            margin-bottom: 5px;
        }
        
        .product-name {
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 600;
            height: 50px;
            overflow: hidden;
        }
        
        .product-price {
            font-size: 1.5rem;
            color: var(--success);
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .product-stock {
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .stock-ok {
            color: var(--success);
        }
        
        .stock-low {
            color: var(--accent);
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
            flex: 1;
        }
        
        .btn-primary:hover {
            background: var(--primary);
        }
        
        .btn-outline {
            background: white;
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }
        
        .btn-outline:hover {
            background: var(--light);
        }
        
        /* PANIER SIDEBAR */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 20px rgba(0,0,0,0.2);
            transition: right 0.3s ease;
            z-index: 1001;
            display: flex;
            flex-direction: column;
        }
        
        .cart-sidebar.active {
            right: 0;
        }
        
        .cart-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cart-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .cart-items {
            margin-bottom: 20px;
        }
        
        .cart-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            background: var(--light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: var(--success);
            font-weight: bold;
        }
        
        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cart-item-qty {
            width: 50px;
            text-align: center;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .cart-item-remove {
            color: var(--accent);
            cursor: pointer;
        }
        
        .cart-footer {
            padding: 20px;
            border-top: 2px solid var(--light);
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
        }
        
        .btn-success:hover {
            background: #219653;
        }
        
        /* FORMULAIRES */
        .forms-container {
            display: none;
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin: 30px 0;
        }
        
        .forms-container.active {
            display: block;
        }
        
        .form-section {
            display: none;
        }
        
        .form-section.active {
            display: block;
        }
        
        .form-title {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-group input {
            width: auto;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn-back {
            background: var(--gray);
            color: white;
        }
        
        .btn-next {
            background: var(--secondary);
            color: white;
        }
        
        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1002;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        /* UTILITIES */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-success {
            color: var(--success);
        }
        
        .text-danger {
            color: var(--accent);
        }
        
        .mb-3 {
            margin-bottom: 30px;
        }
        
        .mt-3 {
            margin-top: 30px;
        }
        
        .p-3 {
            padding: 30px;
        }
        
        /* STEPS */
        .steps {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            padding: 0 20px;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light);
            color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            border: 2px solid var(--light);
        }
        
        .step.active .step-number {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
        }
        
        .step.completed .step-number {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .step-line {
            position: absolute;
            top: 20px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: var(--light);
            z-index: -1;
        }
        
        .step:first-child .step-line {
            display: none;
        }
        
        /* FOOTER */
        footer {
            background: var(--primary);
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }
        
        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section li {
            margin-bottom: 10px;
        }
        
        .footer-section a {
            color: white;
            text-decoration: none;
            opacity: 0.8;
        }
        
        .footer-section a:hover {
            opacity: 1;
        }
        
        /* RESPONSIVE */
        @media (max-width: 1200px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                gap: 15px;
            }
            
            .main-nav {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .section-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .search-box {
                width: 100%;
            }
            
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .product-actions {
                flex-direction: column;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    <div class="logo-text">
                        <h1>Maxi JDC Delivery</h1>
                        <p>Supermarché en ligne - Livraison à domicile</p>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div>Bienvenue</div>
                            <div id="user-name">Client</div>
                        </div>
                    </div>
                    
                    <div class="cart-icon" id="cartToggle">
                        <i class="fas fa-shopping-cart"></i>
                        <div class="cart-count" id="cartCount">0</div>
                    </div>
                </div>
            </div>
            
            <nav class="main-nav">
                <button class="nav-btn active" data-section="products">
                    <i class="fas fa-store"></i> Produits
                </button>
                <button class="nav-btn" data-section="client">
                    <i class="fas fa-user"></i> Fiche Client
                </button>
                <button class="nav-btn" data-section="delivery">
                    <i class="fas fa-truck"></i> Livraison
                </button>
                <button class="nav-btn" data-section="order">
                    <i class="fas fa-receipt"></i> Commande
                </button>
            </nav>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="container">
        <!-- PRODUITS SECTION -->
        <section id="productsSection" class="main-content">
            <!-- FILTRES SIDEBAR -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-filter"></i> Filtres</h3>
                    
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchProducts" placeholder="Rechercher produits...">
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-tags"></i> Catégories</h3>
                    <ul class="category-list" id="categoryList">
                        <!-- Catégories générées par JS -->
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-euro-sign"></i> Prix</h3>
                    <input type="range" id="priceRange" min="0" max="100" value="100" class="price-filter">
                    <div class="price-range">
                        <span>0 €</span>
                        <span id="maxPrice">100 €</span>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-box"></i> Stock</h3>
                    <div class="checkbox-group">
                        <input type="checkbox" id="inStockOnly" checked>
                        <label for="inStockOnly">En stock seulement</label>
                    </div>
                </div>
            </aside>
            
            <!-- PRODUITS -->
            <section class="products-section">
                <div class="section-header">
                    <h2 class="section-title" id="productsTitle">Tous les produits</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="quickSearch" placeholder="Recherche rapide...">
                    </div>
                </div>
                
                <div class="products-grid" id="productsGrid">
                    <!-- Produits générés par JavaScript -->
                </div>
                
                <div class="text-center">
                    <button class="btn btn-primary" id="loadMore">
                        <i class="fas fa-plus"></i> Charger plus de produits
                    </button>
                </div>
            </section>
        </section>

        <!-- FORMULAIRES SECTION -->
        <section id="formsSection" class="forms-container">
            <!-- STEPS -->
            <div class="steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div>Informations Client</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div>Livraison</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div>Validation</div>
                </div>
            </div>

            <!-- FORMULAIRE CLIENT -->
            <div id="clientForm" class="form-section active">
                <h2 class="form-title"><i class="fas fa-user-circle"></i> Informations Client</h2>
                <p class="mb-3">Veuillez remplir vos informations personnelles (une seule fois)</p>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="firstName">Prénom *</label>
                        <input type="text" id="firstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Nom *</label>
                        <input type="text" id="lastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Téléphone *</label>
                        <input type="tel" id="phone" required>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="address">Adresse *</label>
                        <input type="text" id="address" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="city">Ville *</label>
                        <input type="text" id="city" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="zipCode">Code Postal *</label>
                        <input type="text" id="zipCode" required>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="notes">Notes supplémentaires</label>
                        <textarea id="notes" rows="3"></textarea>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button class="btn btn-back" disabled>
                        <i class="fas fa-arrow-left"></i> Retour
                    </button>
                    <button class="btn btn-next" data-next="deliveryForm">
                        Suivant <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- FORMULAIRE LIVRAISON -->
            <div id="deliveryForm" class="form-section">
                <h2 class="form-title"><i class="fas fa-truck"></i> Options de Livraison</h2>
                <p class="mb-3">Choisissez vos préférences de livraison</p>
                
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Mode de livraison *</label>
                        <div class="checkbox-group">
                            <input type="radio" name="deliveryMode" id="deliveryHome" value="home" checked>
                            <label for="deliveryHome">Livraison à domicile</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" name="deliveryMode" id="deliveryPickup" value="pickup">
                            <label for="deliveryPickup">Retrait en magasin</label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="deliveryDate">Date de livraison *</label>
                        <input type="date" id="deliveryDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="deliveryTime">Créneau horaire *</label>
                        <select id="deliveryTime" required>
                            <option value="">Choisir un créneau</option>
                            <option value="9-12">9h - 12h</option>
                            <option value="12-15">12h - 15h</option>
                            <option value="15-18">15h - 18h</option>
                            <option value="18-21">18h - 21h</option>
                        </select>
                    </div>
                    
                    <div class="form-group full-width">
                        <label>Exigences spéciales</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="contactless">
                            <label for="contactless">Livraison sans contact</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="fragile">
                            <label for="fragile">Produits fragiles (frais/surgelés)</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="help">
                            <label for="help">Besoin d'aide pour monter les marches</label>
                        </div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="deliveryNotes">Instructions de livraison</label>
                        <textarea id="deliveryNotes" rows="3" placeholder="Code d'entrée, étage, informations supplémentaires..."></textarea>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button class="btn btn-back" data-prev="clientForm">
                        <i class="fas fa-arrow-left"></i> Retour
                    </button>
                    <button class="btn btn-next" data-next="orderForm">
                        Suivant <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- VALIDATION COMMANDE -->
            <div id="orderForm" class="form-section">
                <h2 class="form-title"><i class="fas fa-check-circle"></i> Validation de Commande</h2>
                
                <div class="mb-3">
                    <h3>Récapitulatif de votre commande</h3>
                    <div id="orderSummary">
                        <!-- Récapitulatif généré par JS -->
                    </div>
                </div>
                
                <div class="mb-3">
                    <h3>Moyen de paiement</h3>
                    <div class="form-grid">
                        <div class="checkbox-group">
                            <input type="radio" name="payment" id="cash" value="cash" checked>
                            <label for="cash">Paiement à la livraison (espèces)</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" name="payment" id="card" value="card">
                            <label for="card">Paiement à la livraison (carte)</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="radio" name="payment" id="online" value="online">
                            <label for="online">Paiement en ligne</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button class="btn btn-back" data-prev="deliveryForm">
                        <i class="fas fa-arrow-left"></i> Retour
                    </button>
                    <button class="btn btn-success" id="placeOrder">
                        <i class="fas fa-check"></i> Confirmer la commande
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- PANIER SIDEBAR -->
    <aside class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2><i class="fas fa-shopping-cart"></i> Votre Panier</h2>
            <button class="btn btn-outline" id="closeCart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="cart-body">
            <div class="cart-items" id="cartItems">
                <!-- Articles du panier générés par JS -->
                <div class="text-center" id="emptyCart">
                    <i class="fas fa-shopping-cart" style="font-size: 3rem; color: #ddd; margin: 30px 0;"></i>
                    <p>Votre panier est vide</p>
                </div>
            </div>
            
            <div class="cart-summary">
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="cartTotal">0,00 €</span>
                </div>
            </div>
        </div>
        
        <div class="cart-footer">
            <button class="btn btn-success" id="checkoutBtn">
                <i class="fas fa-check"></i> Passer commande
            </button>
        </div>
    </aside>

    <!-- MODAL CONFIRMATION -->
    <div class="modal-overlay" id="confirmationModal">
        <div class="modal">
            <h2 class="modal-title"><i class="fas fa-check-circle text-success"></i> Commande confirmée !</h2>
            <div id="confirmationDetails">
                <!-- Détails de confirmation -->
            </div>
            <div class="text-center mt-3">
                <button class="btn btn-primary" id="closeModal">
                    <i class="fas fa-home"></i> Retour aux produits
                </button>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-store"></i> Maxi JDC</h3>
                    <p>Votre supermarché en ligne avec livraison à domicile. Frais, surgelés, épicerie et plus encore.</p>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-clock"></i> Horaires</h3>
                    <ul>
                        <li>Livraison: 9h - 21h</li>
                        <li>7j/7</li>
                        <li>Service client: 24h/24</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-phone"></i> Contact</h3>
                    <ul>
                        <li><i class="fas fa-phone"></i> 01 23 45 67 89</li>
                        <li><i class="fas fa-envelope"></i> contact@maxijdc.fr</li>
                        <li><i class="fas fa-map-marker-alt"></i> Paris, France</li>
                    </ul>
                </div>
            </div>
            
            <div class="text-center mt-3">
                <p>&copy; 2024 Maxi JDC Delivery. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script>
        // DONNÉES COMPLÈTES DES PRODUITS
        const allProductsData = [
            // SURGELÉS (4 produits)
            {id: 1, code: 2682, name: "PETIT POIS SAVEURS 1/2", price: 9.0, category: "surgeles", stock: 45, unit: "500g"},
            {id: 2, code: 3842, name: "LONDON DAIRY CRUNCH CARAMEL 125ML", price: 5.8, category: "surgeles", stock: 32, unit: "125ml"},
            {id: 3, code: 3025, name: "LONDON DAIRY COCONUTELLO", price: 4.3, category: "surgeles", stock: 28, unit: "100ml"},
            {id: 4, code: 2999, name: "LONDON DAIRY CHOCOLATE HAZELNUT CORNET", price: 4.3, category: "surgeles", stock: 35, unit: "110ml"},

            // VIPA (16 produits)
            {id: 5, code: 3711, name: "SELECTION FESTIF VIPA 100G", price: 6.4, category: "vipa", stock: 25, unit: "100g"},
            {id: 6, code: 37110, name: "SELECTION PLAISIR VIPA 100G", price: 7.3, category: "vipa", stock: 18, unit: "100g"},
            {id: 7, code: 3713, name: "SELECTION ORIENTAL VIPA 100G", price: 6.8, category: "vipa", stock: 12, unit: "100g"},
            {id: 8, code: 3721, name: "POUDRE NUTRITIVE D AVOINE", price: 6.5, category: "vipa", stock: 30, unit: "500g"},
            {id: 9, code: 4883, name: "PISTACHE VIPA", price: 6.4, category: "vipa", stock: 8, unit: "200g"},
            {id: 10, code: 3918, name: "GRANOLA DAILY FRAISE/FS VIPA", price: 15.5, category: "vipa", stock: 22, unit: "500g"},
            {id: 11, code: 3724, name: "GRANO BARRE CARAMEL SALE ET FRUITS SECS", price: 2.0, category: "vipa", stock: 45, unit: "50g"},
            {id: 12, code: 4884, name: "GRAINES DE COURGE", price: 13.5, category: "vipa", stock: 15, unit: "250g"},
            {id: 13, code: 3720, name: "DAILY MIEL VIPA", price: 15.5, category: "vipa", stock: 20, unit: "500g"},
            {id: 14, code: 3717, name: "DAILY CHOCOLAT VIPA", price: 15.5, category: "vipa", stock: 18, unit: "500g"},
            {id: 15, code: 3718, name: "DAILY CEREALES SANS SUCRE VIPA", price: 15.5, category: "vipa", stock: 25, unit: "500g"},
            {id: 16, code: 3723, name: "CRAK'O BARRE CACAHUETE, SESAME ET RAISIN VIPA", price: 2.0, category: "vipa", stock: 50, unit: "40g"},
            {id: 17, code: 3709, name: "CACAHUETE TACO VIPA 80GR", price: 2.8, category: "vipa", stock: 35, unit: "80g"},
            {id: 18, code: 3712, name: "CACAHUETES PAPRIKA VIPA", price: 2.8, category: "vipa", stock: 40, unit: "150g"},
            {id: 19, code: 3919, name: "CACAHUETES CARAMEL VIPA", price: 2.8, category: "vipa", stock: 32, unit: "150g"},
            {id: 20, code: 3708, name: "CACAHUETE FROMAGE VIPA 80GR", price: 2.8, category: "vipa", stock: 28, unit: "80g"},

            // ANIMAUX (12 produits)
            {id: 21, code: 5001, name: "CROQUETTES CHAT ADULTE 3KG", price: 12.9, category: "animaux", stock: 45, unit: "3kg"},
            {id: 22, code: 5002, name: "CROQUETTES CHIOT 2KG", price: 15.5, category: "animaux", stock: 32, unit: "2kg"},
            {id: 23, code: 5003, name: "BOITE PÂTÉE POUR CHAT", price: 1.2, category: "animaux", stock: 120, unit: "85g"},
            {id: 24, code: 5004, name: "GRAINES POUR OISEAUX 1KG", price: 4.8, category: "animaux", stock: 28, unit: "1kg"},
            {id: 25, code: 5005, name: "FOIN POUR LAPIN 2KG", price: 6.3, category: "animaux", stock: 35, unit: "2kg"},
            {id: 26, code: 5006, name: "LITIÈRE AGGLOMÉRANTE 5KG", price: 8.9, category: "animaux", stock: 40, unit: "5kg"},
            {id: 27, code: 5007, name: "JOUET POUR CHIEN", price: 7.5, category: "animaux", stock: 22, unit: "unité"},
            {id: 28, code: 5008, name: "GRATTOIR POUR CHAT", price: 14.99, category: "animaux", stock: 18, unit: "unité"},
            {id: 29, code: 5009, name: "AQUARIUM 30L", price: 35.0, category: "animaux", stock: 8, unit: "30L"},
            {id: 30, code: 5010, name: "NOURRITURE POUR POISSON", price: 3.5, category: "animaux", stock: 55, unit: "100g"},
            {id: 31, code: 5011, name: "HAMAC POUR CHAT", price: 12.8, category: "animaux", stock: 15, unit: "unité"},
            {id: 32, code: 5012, name: "LAISSE POUR CHIEN", price: 9.99, category: "animaux", stock: 30, unit: "unité"},

            // BÉBÉ (15 produits)
            {id: 33, code: 6001, name: "COUCHES TAILLE 3 X60", price: 14.9, category: "bebe", stock: 65, unit: "60 unités"},
            {id: 34, code: 6002, name: "LAIT EN POUDRE 1ER AGE", price: 22.5, category: "bebe", stock: 42, unit: "800g"},
            {id: 35, code: 6003, name: "BIBERON 250ML", price: 5.8, category: "bebe", stock: 38, unit: "250ml"},
            {id: 36, code: 6004, name: "LINGETTES BÉBÉ X80", price: 3.2, category: "bebe", stock: 72, unit: "80 unités"},
            {id: 37, code: 6005, name: "CRÈME POUR LE SIÈGE", price: 6.5, category: "bebe", stock: 48, unit: "100ml"},
            {id: 38, code: 6006, name: "BRACELET DE DENTITION", price: 4.3, category: "bebe", stock: 55, unit: "unité"},
            {id: 39, code: 6007, name: "JOUET D'ÉVEIL", price: 8.9, category: "bebe", stock: 33, unit: "unité"},
            {id: 40, code: 6008, name: "TÉTINE ORTHODONTIQUE", price: 3.8, category: "bebe", stock: 60, unit: "unité"},
            {id: 41, code: 6009, name: "BODY 3 MOIS X3", price: 12.5, category: "bebe", stock: 40, unit: "3 unités"},
            {id: 42, code: 6010, name: "SAC À LANGER", price: 24.99, category: "bebe", stock: 18, unit: "unité"},
            {id: 43, code: 6011, name: "PARACÉTAMOL PÉDIATRIQUE", price: 3.6, category: "bebe", stock: 45, unit: "100ml"},
            {id: 44, code: 6012, name: "THERMOMÈTRE FRONTAL", price: 15.8, category: "bebe", stock: 25, unit: "unité"},
            {id: 45, code: 6013, name: "SIÈGE AUTO GROUPE 1", price: 89.99, category: "bebe", stock: 10, unit: "unité"},
            {id: 46, code: 6014, name: "PARC POUR BÉBÉ", price: 75.0, category: "bebe", stock: 7, unit: "unité"},
            {id: 47, code: 6015, name: "VEILLEUSE MUSICALE", price: 18.5, category: "bebe", stock: 20, unit: "unité"},

            // FRUITS SECS (20 produits)
            {id: 48, code: 7001, name: "AMANDES DÉCORTIQUÉES 200G", price: 5.9, category: "fruits", stock: 50, unit: "200g"},
            {id: 49, code: 7002, name: "NOIX DE CAJOU GRILLÉES 150G", price: 4.8, category: "fruits", stock: 45, unit: "150g"},
            {id: 50, code: 7003, name: "RAISINS SECS THOMPSON 250G", price: 3.2, category: "fruits", stock: 60, unit: "250g"},
            {id: 51, code: 7004, name: "ABRICOTS SECS 200G", price: 4.5, category: "fruits", stock: 38, unit: "200g"},
            {id: 52, code: 7005, name: "DATTES DEGLET NOUR 500G", price: 6.8, category: "fruits", stock: 32, unit: "500g"},
            {id: 53, code: 7006, name: "FIGUES SÈCHES 250G", price: 5.2, category: "fruits", stock: 28, unit: "250g"},
            {id: 54, code: 7007, name: "PRUNEAUX D'AGEN 400G", price: 4.9, category: "fruits", stock: 42, unit: "400g"},
            {id: 55, code: 7008, name: "CRANBERRIES SÉCHÉES 150G", price: 3.8, category: "fruits", stock: 55, unit: "150g"},
            {id: 56, code: 7009, name: "MÉLANGE TROPICAL 300G", price: 7.5, category: "fruits", stock: 30, unit: "300g"},
            {id: 57, code: 7010, name: "PISTACHES GRILLÉES 200G", price: 8.2, category: "fruits", stock: 25, unit: "200g"},
            {id: 58, code: 7011, name: "NOIX DU BRÉSIL 150G", price: 6.5, category: "fruits", stock: 20, unit: "150g"},
            {id: 59, code: 7012, name: "PIGNONS DE PIN 100G", price: 9.8, category: "fruits", stock: 18, unit: "100g"},
            {id: 60, code: 7013, name: "GRAINES DE TOURNESOL 250G", price: 2.9, category: "fruits", stock: 65, unit: "250g"},
            {id: 61, code: 7014, name: "GRAINES DE CITROUILLE 200G", price: 4.3, category: "fruits", stock: 40, unit: "200g"},
            {id: 62, code: 7015, name: "MÉLANGE ÉTUDIANT 500G", price: 12.5, category: "fruits", stock: 22, unit: "500g"},
            {id: 63, code: 7016, name: "BANANES SÉCHÉES 150G", price: 3.4, category: "fruits", stock: 48, unit: "150g"},
            {id: 64, code: 7017, name: "MANGUES SÉCHÉES 100G", price: 4.6, category: "fruits", stock: 35, unit: "100g"},
            {id: 65, code: 7018, name: "NOIX DE PÉCAN 180G", price: 7.8, category: "fruits", stock: 15, unit: "180g"},
            {id: 66, code: 7019, name: "MELON SÉCHÉ 120G", price: 3.9, category: "fruits", stock: 28, unit: "120g"},
            {id: 67, code: 7020, name: "FRUITS SECS BIO 400G", price: 10.9, category: "fruits", stock: 20, unit: "400g"},

            // CHIPS & SNACK (25 produits)
            {id: 68, code: 8001, name: "CHIPS NATURE 150G", price: 1.8, category: "chips", stock: 120, unit: "150g"},
            {id: 69, code: 8002, name: "CHIPS SAVEUR BARBECUE 150G", price: 1.9, category: "chips", stock: 95, unit: "150g"},
            {id: 70, code: 8003, name: "CHIPS SAVEUR VINAIGRE 150G", price: 1.9, category: "chips", stock: 88, unit: "150g"},
            {id: 71, code: 8004, name: "CHIPS AU FROMAGE 200G", price: 2.2, category: "chips", stock: 75, unit: "200g"},
            {id: 72, code: 8005, name: "CHIPS DE LÉGUMES 100G", price: 2.5, category: "chips", stock: 60, unit: "100g"},
            {id: 73, code: 8006, name: "PRETZELS 200G", price: 2.8, category: "chips", stock: 55, unit: "200g"},
            {id: 74, code: 8007, name: "CRACKERS SALÉS 250G", price: 2.4, category: "chips", stock: 70, unit: "250g"},
            {id: 75, code: 8008, name: "BISCUITS APÉRITIFS 300G", price: 3.2, category: "chips", stock: 65, unit: "300g"},
            {id: 76, code: 8009, name: "CACAHUÈTES GRILLÉES 150G", price: 2.1, category: "chips", stock: 85, unit: "150g"},
            {id: 77, code: 8010, name: "AMANDES GRILLÉES SALÉES 120G", price: 3.5, category: "chips", stock: 50, unit: "120g"},
            {id: 78, code: 8011, name: "TORTILLAS CHIPS NATURE 200G", price: 2.3, category: "chips", stock: 45, unit: "200g"},
            {id: 79, code: 8012, name: "TORTILLAS CHIPS SAVEUR FAJITAS", price: 2.4, category: "chips", stock: 42, unit: "200g"},
            {id: 80, code: 8013, name: "POPCORN SALÉ 100G", price: 1.6, category: "chips", stock: 90, unit: "100g"},
            {id: 81, code: 8014, name: "POPCORN CARAMEL 100G", price: 1.8, category: "chips", stock: 78, unit: "100g"},
            {id: 82, code: 8015, name: "BÂTONNETS DE SÉSAME 180G", price: 2.9, category: "chips", stock: 40, unit: "180g"},
            {id: 83, code: 8016, name: "CRACKERS AU GRAINES 200G", price: 3.1, category: "chips", stock: 35, unit: "200g"},
            {id: 84, code: 8017, name: "MIX APÉRITIF 350G", price: 4.5, category: "chips", stock: 30, unit: "350g"},
            {id: 85, code: 8018, name: "CHIPS DE POMMES 80G", price: 2.8, category: "chips", stock: 55, unit: "80g"},
            {id: 86, code: 8019, name: "CHIPS DE PATATE DOUCE 100G", price: 3.2, category: "chips", stock: 38, unit: "100g"},
            {id: 87, code: 8020, name: "OLIVES VERTES FARCIES 200G", price: 3.8, category: "chips", stock: 48, unit: "200g"},
            {id: 88, code: 8021, name: "CORNICHONS AIGRES-DOUX 250G", price: 2.9, category: "chips", stock: 52, unit: "250g"},
            {id: 89, code: 8022, name: "SAUCISSON SEC MINI 180G", price: 4.8, category: "chips", stock: 25, unit: "180g"},
            {id: 90, code: 8023, name: "MINI TOASTS APÉRITIFS", price: 1.9, category: "chips", stock: 80, unit: "200g"},
            {id: 91, code: 8024, name: "BÂTONS DE SURIMI 200G", price: 3.5, category: "chips", stock: 42, unit: "200g"},
            {id: 92, code: 8025, name: "MÉLANGE APÉRO 500G", price: 6.9, category: "chips", stock: 28, unit: "500g"}
        ];

        // CATÉGORIES
        const categories = [
            {id: 'all', name: 'Tous les produits', icon: 'fas fa-th-large', count: 92},
            {id: 'surgeles', name: 'Produits Surgelés', icon: 'fas fa-snowflake', count: 4},
            {id: 'vipa', name: 'Vipa & Sélection', icon: 'fas fa-star', count: 16},
            {id: 'animaux', name: 'Animaux', icon: 'fas fa-paw', count: 12},
            {id: 'bebe', name: 'Bébé & Maman', icon: 'fas fa-baby', count: 15},
            {id: 'fruits', name: 'Fruits Secs & Noix', icon: 'fas fa-seedling', count: 20},
            {id: 'chips', name: 'Chips & Snack', icon: 'fas fa-cookie-bite', count: 25}
        ];

        // DONNÉES UTILISATEUR
        const userData = {
            firstName: '',
            lastName: '',
            email: '',
            phone: '',
            address: '',
            city: '',
            zipCode: '',
            notes: '',
            delivery: {
                mode: 'home',
                date: '',
                time: '',
                contactless: false,
                fragile: false,
                help: false,
                notes: ''
            },
            payment: 'cash'
        };

        // PANIER
        let cart = JSON.parse(localStorage.getItem('maxijdc_cart')) || [];
        let currentCategory = 'all';
        let displayedProducts = [];
        let productsToShow = 12;

        // INITIALISATION
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        function initApp() {
            // Générer les catégories
            generateCategories();
            
            // Afficher les produits
            filterProducts();
            
            // Mettre à jour le panier
            updateCartDisplay();
            
            // Configurer les événements
            setupEventListeners();
            
            // Charger les données utilisateur sauvegardées
            loadUserData();
        }

        function generateCategories() {
            const container = document.getElementById('categoryList');
            container.innerHTML = '';
            
            categories.forEach(cat => {
                const li = document.createElement('li');
                li.className = 'category-item';
                if (cat.id === currentCategory) li.classList.add('active');
                
                li.innerHTML = `
                    <i class="${cat.icon}"></i>
                    <span>${cat.name}</span>
                    <span style="margin-left: auto; font-size: 0.8rem; color: var(--gray);">${cat.count}</span>
                `;
                
                li.dataset.category = cat.id;
                li.addEventListener('click', () => {
                    currentCategory = cat.id;
                    document.querySelectorAll('.category-item').forEach(item => item.classList.remove('active'));
                    li.classList.add('active');
                    
                    document.getElementById('productsTitle').textContent = cat.name;
                    filterProducts();
                });
                
                container.appendChild(li);
            });
        }

        function filterProducts() {
            let filtered = allProductsData;
            
            // Filtrer par catégorie
            if (currentCategory !== 'all') {
                filtered = filtered.filter(p => p.category === currentCategory);
            }
            
            // Filtrer par recherche
            const searchTerm = document.getElementById('quickSearch').value.toLowerCase();
            if (searchTerm) {
                filtered = filtered.filter(p => 
                    p.name.toLowerCase().includes(searchTerm) || 
                    p.code.toString().includes(searchTerm)
                );
            }
            
            // Filtrer par prix
            const maxPrice = parseFloat(document.getElementById('priceRange').value);
            filtered = filtered.filter(p => p.price <= maxPrice);
            
            // Filtrer par stock
            const inStockOnly = document.getElementById('inStockOnly').checked;
            if (inStockOnly) {
                filtered = filtered.filter(p => p.stock > 0);
            }
            
            displayedProducts = filtered;
            displayProducts(filtered.slice(0, productsToShow));
        }

        function displayProducts(products) {
            const container = document.getElementById('productsGrid');
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <i class="fas fa-search" style="font-size: 3rem; color: #ddd; margin-bottom: 20px;"></i>
                        <h3>Aucun produit trouvé</h3>
                        <p>Essayez avec d'autres critères de recherche.</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                
                const stockClass = product.stock > 10 ? 'stock-ok' : 'stock-low';
                const stockText = product.stock > 10 ? `${product.stock} en stock` : `Stock faible (${product.stock})`;
                
                const inCart = cart.find(item => item.id === product.id);
                const cartQty = inCart ? inCart.quantity : 0;
                
                card.innerHTML = `
                    ${product.stock < 5 ? '<div class="product-badge">Stock limité</div>' : ''}
                    
                    <div class="product-image">
                        <i class="fas fa-box"></i>
                    </div>
                    
                    <div class="product-code">CODE: ${product.code}</div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">${product.price.toFixed(2).replace('.', ',')} €</div>
                    
                    <div class="product-stock ${stockClass}">
                        <i class="fas fa-box"></i> ${stockText}
                    </div>
                    
                    <div class="product-actions">
                        ${cartQty > 0 ? `
                            <div style="display: flex; align-items: center; gap: 10px; flex: 1;">
                                <button class="btn btn-outline" onclick="updateCartQuantity(${product.id}, ${cartQty - 1})">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span style="font-weight: bold;">${cartQty}</span>
                                <button class="btn btn-outline" onclick="updateCartQuantity(${product.id}, ${cartQty + 1})" ${product.stock <= cartQty ? 'disabled' : ''}>
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        ` : `
                            <button class="btn btn-primary" onclick="addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                                <i class="fas fa-cart-plus"></i> Ajouter
                            </button>
                        `}
                        
                        <button class="btn btn-outline" onclick="showProductDetails(${product.id})">
                            <i class="fas fa-info"></i>
                        </button>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // FONCTIONS PANIER
        function addToCart(productId) {
            const product = allProductsData.find(p => p.id === productId);
            if (!product || product.stock === 0) return;
            
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                if (existingItem.quantity < product.stock) {
                    existingItem.quantity++;
                }
            } else {
                cart.push({
                    id: productId,
                    quantity: 1,
                    code: product.code,
                    name: product.name,
                    price: product.price,
                    unit: product.unit
                });
            }
            
            saveCart();
            updateCartDisplay();
            filterProducts(); // Re-afficher pour mettre à jour les boutons
        }

        function updateCartQuantity(productId, newQuantity) {
            const product = allProductsData.find(p => p.id === productId);
            const cartItem = cart.find(item => item.id === productId);
            
            if (!cartItem || !product) return;
            
            if (newQuantity <= 0) {
                cart = cart.filter(item => item.id !== productId);
            } else if (newQuantity <= product.stock) {
                cartItem.quantity = newQuantity;
            }
            
            saveCart();
            updateCartDisplay();
            filterProducts();
        }

        function saveCart() {
            localStorage.setItem('maxijdc_cart', JSON.stringify(cart));
        }

        function updateCartDisplay() {
            // Mettre à jour le compteur
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
            
            // Mettre à jour le contenu du panier
            const container = document.getElementById('cartItems');
            const emptyCart = document.getElementById('emptyCart');
            const totalElement = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center" id="emptyCart">
                        <i class="fas fa-shopping-cart" style="font-size: 3rem; color: #ddd; margin: 30px 0;"></i>
                        <p>Votre panier est vide</p>
                    </div>
                `;
                totalElement.textContent = '0,00 €';
                return;
            }
            
            container.innerHTML = '';
            let total = 0;
            
            cart.forEach(item => {
                const product = allProductsData.find(p => p.id === item.id);
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `
                    <div class="cart-item-image">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${item.price.toFixed(2)} € / ${item.unit}</div>
                        <div>Quantité: ${item.quantity}</div>
                    </div>
                    <div class="cart-item-actions">
                        <input type="number" class="cart-item-qty" value="${item.quantity}" min="1" max="${product.stock}" 
                               onchange="updateCartQuantity(${item.id}, parseInt(this.value))">
                        <div class="cart-item-remove" onclick="updateCartQuantity(${item.id}, 0)">
                            <i class="fas fa-trash"></i>
                        </div>
                    </div>
                `;
                
                container.appendChild(div);
            });
            
            totalElement.textContent = total.toFixed(2).replace('.', ',') + ' €';
        }

        // FORMULAIRES
        function setupEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const section = this.dataset.section;
                    
                    // Mettre à jour les boutons actifs
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Afficher la bonne section
                    if (section === 'products') {
                        document.getElementById('productsSection').style.display = 'flex';
                        document.getElementById('formsSection').classList.remove('active');
                    } else {
                        document.getElementById('productsSection').style.display = 'none';
                        document.getElementById('formsSection').classList.add('active');
                        showForm(section + 'Form');
                    }
                });
            });
            
            // Recherche
            document.getElementById('quickSearch').addEventListener('input', filterProducts);
            document.getElementById('searchProducts').addEventListener('input', filterProducts);
            
            // Filtres
            document.getElementById('priceRange').addEventListener('input', function() {
                document.getElementById('maxPrice').textContent = this.value + ' €';
                filterProducts();
            });
            
            document.getElementById('inStockOnly').addEventListener('change', filterProducts);
            
            // Panier
            document.getElementById('cartToggle').addEventListener('click', () => {
                document.getElementById('cartSidebar').classList.add('active');
            });
            
            document.getElementById('closeCart').addEventListener('click', () => {
                document.getElementById('cartSidebar').classList.remove('active');
            });
            
            // Formulaire navigation
            document.querySelectorAll('.btn-next').forEach(btn => {
                btn.addEventListener('click', function() {
                    const nextForm = this.dataset.next;
                    saveFormData();
                    showForm(nextForm);
                });
            });
            
            document.querySelectorAll('.btn-back').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.dataset.prev) {
                        const prevForm = this.dataset.prev;
                        showForm(prevForm);
                    }
                });
            });
            
            // Commande
            document.getElementById('checkoutBtn').addEventListener('click', () => {
                if (cart.length === 0) {
                    alert('Votre panier est vide !');
                    return;
                }
                
                // Passer au formulaire client
                document.querySelector('.nav-btn[data-section="client"]').click();
            });
            
            document.getElementById('placeOrder').addEventListener('click', placeOrder);
            document.getElementById('closeModal').addEventListener('click', closeModal);
            
            // Charger plus de produits
            document.getElementById('loadMore').addEventListener('click', () => {
                productsToShow += 12;
                displayProducts(displayedProducts.slice(0, productsToShow));
                
                if (productsToShow >= displayedProducts.length) {
                    document.getElementById('loadMore').style.display = 'none';
                }
            });
        }

        function showForm(formId) {
            // Cacher tous les formulaires
            document.querySelectorAll('.form-section').forEach(form => {
                form.classList.remove('active');
            });
            
            // Afficher le bon formulaire
            document.getElementById(formId).classList.add('active');
            
            // Mettre à jour les étapes
            const step = parseInt(formId.replace('Form', '').replace('client', '1').replace('delivery', '2').replace('order', '3'));
            document.querySelectorAll('.step').forEach(s => {
                s.classList.remove('active', 'completed');
            });
            
            for (let i = 1; i <= step; i++) {
                const stepEl = document.querySelector(`.step[data-step="${i}"]`);
                if (i < step) {
                    stepEl.classList.add('completed');
                } else if (i === step) {
                    stepEl.classList.add('active');
                }
            }
            
            // Si on est sur le récapitulatif, le mettre à jour
            if (formId === 'orderForm') {
                updateOrderSummary();
            }
        }

        function saveFormData() {
            // Sauvegarder les données client
            userData.firstName = document.getElementById('firstName').value;
            userData.lastName = document.getElementById('lastName').value;
            userData.email = document.getElementById('email').value;
            userData.phone = document.getElementById('phone').value;
            userData.address = document.getElementById('address').value;
            userData.city = document.getElementById('city').value;
            userData.zipCode = document.getElementById('zipCode').value;
            userData.notes = document.getElementById('notes').value;
            
            // Mettre à jour le nom dans le header
            if (userData.firstName) {
                document.getElementById('user-name').textContent = `${userData.firstName} ${userData.lastName}`;
            }
            
            // Sauvegarder les préférences de livraison
            userData.delivery.mode = document.querySelector('input[name="deliveryMode"]:checked').value;
            userData.delivery.date = document.getElementById('deliveryDate').value;
            userData.delivery.time = document.getElementById('deliveryTime').value;
            userData.delivery.contactless = document.getElementById('contactless').checked;
            userData.delivery.fragile = document.getElementById('fragile').checked;
            userData.delivery.help = document.getElementById('help').checked;
            userData.delivery.notes = document.getElementById('deliveryNotes').value;
            
            // Sauvegarder dans le localStorage
            localStorage.setItem('maxijdc_user', JSON.stringify(userData));
        }

        function loadUserData() {
            const saved = localStorage.getItem('maxijdc_user');
            if (saved) {
                Object.assign(userData, JSON.parse(saved));
                
                // Remplir les champs du formulaire
                document.getElementById('firstName').value = userData.firstName || '';
                document.getElementById('lastName').value = userData.lastName || '';
                document.getElementById('email').value = userData.email || '';
                document.getElementById('phone').value = userData.phone || '';
                document.getElementById('address').value = userData.address || '';
                document.getElementById('city').value = userData.city || '';
                document.getElementById('zipCode').value = userData.zipCode || '';
                document.getElementById('notes').value = userData.notes || '';
                
                // Mettre à jour le nom dans le header
                if (userData.firstName) {
                    document.getElementById('user-name').textContent = `${userData.firstName} ${userData.lastName}`;
                }
            }
            
            // Définir la date de livraison minimale (demain)
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('deliveryDate').min = tomorrow.toISOString().split('T')[0];
        }

        function updateOrderSummary() {
            const container = document.getElementById('orderSummary');
            let html = `
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h4>Informations client</h4>
                    <p>${userData.firstName} ${userData.lastName}</p>
                    <p>${userData.address}, ${userData.zipCode} ${userData.city}</p>
                    <p>${userData.phone} | ${userData.email}</p>
                </div>
                
                <div style="margin-top: 20px; background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h4>Livraison</h4>
                    <p>Mode: ${userData.delivery.mode === 'home' ? 'Livraison à domicile' : 'Retrait en magasin'}</p>
                    <p>Date: ${userData.delivery.date}</p>
                    <p>Créneau: ${userData.delivery.time}</p>
            `;
            
            if (userData.delivery.contactless) html += '<p>✓ Livraison sans contact</p>';
            if (userData.delivery.fragile) html += '<p>✓ Produits fragiles</p>';
            if (userData.delivery.help) html += '<p>✓ Aide pour monter les marches</p>';
            if (userData.delivery.notes) html += `<p>Notes: ${userData.delivery.notes}</p>`;
            
            html += `</div>`;
            
            // Articles commandés
            html += `
                <div style="margin-top: 20px; background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h4>Articles (${cart.reduce((sum, item) => sum + item.quantity, 0)})</h4>
            `;
            
            cart.forEach(item => {
                html += `<p>${item.quantity}x ${item.name} - ${(item.price * item.quantity).toFixed(2)} €</p>`;
            });
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const deliveryFee = userData.delivery.mode === 'home' ? 2.90 : 0;
            const finalTotal = total + deliveryFee;
            
            html += `
                    <hr style="margin: 15px 0;">
                    <p>Sous-total: ${total.toFixed(2)} €</p>
                    <p>Frais de livraison: ${deliveryFee.toFixed(2)} €</p>
                    <p style="font-weight: bold; font-size: 1.2rem;">Total: ${finalTotal.toFixed(2)} €</p>
                </div>
            `;
            
            container.innerHTML = html;
        }

        function placeOrder() {
            // Valider le formulaire client
            if (!userData.firstName || !userData.lastName || !userData.email || !userData.phone || 
                !userData.address || !userData.city || !userData.zipCode) {
                alert('Veuillez remplir tous les champs obligatoires de la fiche client.');
                showForm('clientForm');
                return;
            }
            
            // Valider la livraison
            if (!userData.delivery.date || !userData.delivery.time) {
                alert('Veuillez sélectionner une date et un créneau de livraison.');
                showForm('deliveryForm');
                return;
            }
            
            // Simuler le traitement de la commande
            const orderNumber = 'CMD-' + Date.now().toString().slice(-8);
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const deliveryFee = userData.delivery.mode === 'home' ? 2.90 : 0;
            const finalTotal = total + deliveryFee;
            
            // Afficher la confirmation
            const modal = document.getElementById('confirmationModal');
            const details = document.getElementById('confirmationDetails');
            
            details.innerHTML = `
                <div style="text-align: center;">
                    <i class="fas fa-check-circle" style="font-size: 4rem; color: var(--success); margin: 20px 0;"></i>
                    <h3>Commande #${orderNumber} confirmée !</h3>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Total:</strong> ${finalTotal.toFixed(2)} €</p>
                        <p><strong>Livraison:</strong> ${userData.delivery.date} entre ${userData.delivery.time}h</p>
                        <p><strong>Mode:</strong> ${userData.delivery.mode === 'home' ? 'Livraison à domicile' : 'Retrait en magasin'}</p>
                        <p><strong>Paiement:</strong> ${document.querySelector('input[name="payment"]:checked').value === 'cash' ? 'Espèces à la livraison' : 
                                                      document.querySelector('input[name="payment"]:checked').value === 'card' ? 'Carte à la livraison' : 'En ligne'}</p>
                    </div>
                    
                    <p>Un email de confirmation a été envoyé à ${userData.email}</p>
                    <p>Merci pour votre commande !</p>
                </div>
            `;
            
            modal.classList.add('active');
            
            // Réinitialiser le panier
            cart = [];
            saveCart();
            updateCartDisplay();
            filterProducts();
            
            // Réinitialiser le formulaire de livraison
            document.getElementById('deliveryDate').value = '';
            document.getElementById('deliveryTime').value = '';
            document.getElementById('contactless').checked = false;
            document.getElementById('fragile').checked = false;
            document.getElementById('help').checked = false;
            document.getElementById('deliveryNotes').value = '';
        }

        function closeModal() {
            document.getElementById('confirmationModal').classList.remove('active');
            document.querySelector('.nav-btn[data-section="products"]').click();
        }

        function showProductDetails(productId) {
            const product = allProductsData.find(p => p.id === productId);
            if (!product) return;
            
            alert(`${product.name}\n\nCode: ${product.code}\nPrix: ${product.price.toFixed(2)} €\nStock: ${product.stock}\nUnité: ${product.unit}\n\n${getCategoryName(product.category)}`);
        }

        function getCategoryName(categoryId) {
            const cat = categories.find(c => c.id === categoryId);
            return cat ? cat.name : categoryId;
        }

        // Exporter les fonctions globales
        window.addToCart = addToCart;
        window.updateCartQuantity = updateCartQuantity;
        window.showProductDetails = showProductDetails;
    </script>
</body>
</html>
